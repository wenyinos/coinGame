{"version":3,"sources":["file:///D:/MyCoding/Cosos/coinGame/assets/scripts/LoadCtrl.ts"],"names":["_decorator","Color","Component","Sprite","Main","aa","ccclass","property","startColor","colorRatio","color","LoadCtrl","isload","fill","start","bg","closeLoad","ins","initGame","utils","clearUI","node","update","deltaTime","rate","res","loadingRate","r","g","b","load","fillRange"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,M,OAAAA,M;;AACpCC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,E,iBAAAA,E;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAExBQ,MAAAA,U,GAAa,G;AACbC,MAAAA,U,GAAc,MAAID,U;AAClBE,MAAAA,K,GAAQ,IAAIT,KAAJ,CAAUO,UAAV,EAAqBA,UAArB,EAAgCA,UAAhC,C;;0BAGDG,Q,WADZL,OAAO,CAAC,UAAD,C,UAGHC,QAAQ,CAACJ,MAAD,C,UAERI,QAAQ,CAACJ,MAAD,C,2BALb,MACaQ,QADb,SAC8BT,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQ5BU,MAR4B,GAQnB,IARmB;AAAA,eAS5BC,IAT4B,GASrB,CATqB;AAAA;;AAY1BC,QAAAA,KAAK,GAAS;AACpB,eAAKC,EAAL,CAAQL,KAAR,GAAgBA,KAAhB;AACH;;AAEDM,QAAAA,SAAS,GAAG;AACR,eAAKJ,MAAL,GAAc,KAAd;AACA;AAAA;AAAA,4BAAKK,GAAL,CAASC,QAAT;AACA;AAAA;AAAA,wBAAGC,KAAH,CAASC,OAAT,CAAiB,KAAKC,IAAtB;AACH;;AAGDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,CAAC,KAAKX,MAAV,EAAkB;AAElB,cAAMY,IAAI,GAAG;AAAA;AAAA,wBAAGC,GAAH,CAAOC,WAApB;AAEA,eAAKb,IAAL,IAAY,IAAZ;AAEA,cAAG,KAAKA,IAAL,GAAUW,IAAb,EAAmB,KAAKX,IAAL,GAAYW,IAAZ;AAEnBd,UAAAA,KAAK,CAACiB,CAAN,GAAUjB,KAAK,CAACkB,CAAN,GAAUlB,KAAK,CAACmB,CAAN,GAASrB,UAAU,GAACC,UAAU,GAAC,KAAKI,IAAxD;AAEA,eAAKE,EAAL,CAAQL,KAAR,GAAgBA,KAAhB;AAEA,eAAKoB,IAAL,CAAUC,SAAV,GAAsB,KAAKlB,IAA3B;;AAEA,cAAI,KAAKA,IAAL,IAAa,IAAjB,EAAuB;AACnB,iBAAKG,SAAL;AACH;AAEJ;;AA1CmC,O;;;;;iBAGrB,I;;;;;;;iBAEF,I","sourcesContent":["\r\n\r\nimport { _decorator, Color, Component, Node, Sprite, view } from 'cc';\r\nimport { Main } from './Main';\r\nimport { aa } from './frame/FrameCore';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst startColor = 150;\r\nconst colorRatio = (255-startColor);\r\nconst color = new Color(startColor,startColor,startColor);\r\n\r\n@ccclass('LoadCtrl')\r\nexport class LoadCtrl extends Component {\r\n\r\n    @property(Sprite)\r\n    load: Sprite = null;\r\n    @property(Sprite)\r\n    bg: Sprite = null;\r\n\r\n\r\n    private isload = true;\r\n    private fill = 0;\r\n\r\n    \r\n    protected start(): void {\r\n        this.bg.color = color;\r\n    }\r\n\r\n    closeLoad() {\r\n        this.isload = false;\r\n        Main.ins.initGame();\r\n        aa.utils.clearUI(this.node);\r\n    }\r\n\r\n\r\n    update(deltaTime: number) {\r\n        if (!this.isload) return;\r\n\r\n        const rate = aa.res.loadingRate;\r\n\r\n        this.fill +=0.01;\r\n\r\n        if(this.fill>rate) this.fill = rate;\r\n\r\n        color.r = color.g = color.b =startColor+colorRatio*this.fill;\r\n\r\n        this.bg.color = color;\r\n\r\n        this.load.fillRange = this.fill;\r\n\r\n        if (this.fill >= 0.99) {\r\n            this.closeLoad();\r\n        }\r\n\r\n    }\r\n}\r\n\r\n"]}