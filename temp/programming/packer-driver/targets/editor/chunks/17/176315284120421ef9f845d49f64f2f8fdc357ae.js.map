{"version":3,"sources":["file:///D:/MyCoding/Cosos/coinGame/assets/scripts/frame/managers/SoundMgr.ts"],"names":["SoundMgr","AudioSourceComponent","RES","_audioComp","_audioLoopComp","_effectComp","_curLoopAudioName","startBgm","audio","isLoop","clip","play","getClip","loop","volume","stopBgm","stop","scale","playOneShot","stoploop","SOUND"],"mappings":";;;0GAKMA,Q;;;;;;;;;;;;;AAJGC,MAAAA,oB,OAAAA,oB;;AACFC,MAAAA,G;;;;;;;;;AAGDF,MAAAA,Q,GAAN,MAAMA,QAAN,CAAe;AAAA;AAEX;AACJ;AACA;AACA;AALe,eAMHG,UANG,GAMgC,IAAIF,oBAAJ,EANhC;;AAQX;AACJ;AACA;AACA;AAXe,eAYHG,cAZG,GAYoC,IAAIH,oBAAJ,EAZpC;;AAaX;AACJ;AACA;AACA;AAhBe,eAiBHI,WAjBG,GAiBiC,IAAIJ,oBAAJ,EAjBjC;AAAA,eAkBHK,iBAlBG,GAkByB,EAlBzB;AAAA;;AAqBX;AACJ;AACA;AACA;AACA;AACA;AACWC,QAAAA,QAAQ,CAAEC,KAAF,EAAkBC,MAAe,GAAG,IAApC,EAA0C;AACrD,cAAI,CAACD,KAAD,IAAU,KAAKL,UAAL,CAAgBO,IAA9B,EAAoC;AAChC,iBAAKP,UAAL,CAAgBQ,IAAhB;;AACA;AACH;;AACD,cAAI,CAACH,KAAL,EAAY;AACZ,cAAIE,IAAI,GAAG;AAAA;AAAA,0BAAIE,OAAJ,CAAYJ,KAAZ,CAAX;AACA,eAAKL,UAAL,CAAgBO,IAAhB,GAAuBA,IAAvB;AACA,eAAKP,UAAL,CAAgBU,IAAhB,GAAuBJ,MAAvB;AACA,eAAKN,UAAL,CAAgBW,MAAhB,GAAyB,GAAzB;;AACA,eAAKX,UAAL,CAAgBQ,IAAhB;AACH;AAED;AACJ;AACA;AACA;;;AACWI,QAAAA,OAAO,GAAG;AACb,eAAKZ,UAAL,CAAgBa,IAAhB;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACWL,QAAAA,IAAI,CAACD,IAAD,EAAeO,KAAK,GAAG,GAAvB,EAA4B;AACnC,eAAKZ,WAAL,CAAiBa,WAAjB,CAA6B;AAAA;AAAA,0BAAIN,OAAJ,CAAYF,IAAZ,CAA7B,EAAgDO,KAAhD;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACWJ,QAAAA,IAAI,CAACL,KAAD,EAAgB;AAEvB,cAAIE,IAAI,GAAG;AAAA;AAAA,0BAAIE,OAAJ,CAAYJ,KAAZ,CAAX;;AACA,eAAKJ,cAAL,CAAoBY,IAApB;;AACA,eAAKZ,cAAL,CAAoBM,IAApB,GAA2BA,IAA3B;AACA,eAAKN,cAAL,CAAoBS,IAApB,GAA2B,IAA3B;;AACA,eAAKT,cAAL,CAAoBO,IAApB;;AACA,eAAKL,iBAAL,GAAyBE,KAAzB;AACH;;AAEMW,QAAAA,QAAQ,GAAG;AACd,eAAKf,cAAL,CAAoBY,IAApB;AACH;;AA1EU,O;AA8ETI,MAAAA,K,GAAQ,IAAIpB,QAAJ,E;;yBAECoB,K","sourcesContent":["\r\nimport { AudioSourceComponent, _decorator } from \"cc\";\r\nimport RES from \"./ResMgr\";\r\n\r\n\r\nclass SoundMgr {\r\n  \r\n    /**\r\n     * @en : for bgm\r\n     * @cn : bgm\r\n     */\r\n    private _audioComp: AudioSourceComponent = new AudioSourceComponent();;\r\n \r\n    /**\r\n     * @en : for loop audio effect\r\n     * @cn : 循环音效\r\n     */\r\n    private _audioLoopComp: AudioSourceComponent = new AudioSourceComponent();;\r\n    /**\r\n     * @en : for one-time audio effect\r\n     * @cn : 单次音效\r\n     */\r\n    private _effectComp: AudioSourceComponent = new AudioSourceComponent();;\r\n    private _curLoopAudioName: string = \"\";\r\n   \r\n\r\n    /**\r\n     * @en : play bgm\r\n     * @cn : 播放背景音乐\r\n     * @param {string} audio\r\n     * @param {boolean} isLoop\r\n     */\r\n    public startBgm (audio?: string, isLoop: boolean = true) {\r\n        if (!audio && this._audioComp.clip) {\r\n            this._audioComp.play();\r\n            return;\r\n        }\r\n        if (!audio) return;\r\n        let clip = RES.getClip(audio);\r\n        this._audioComp.clip = clip;\r\n        this._audioComp.loop = isLoop;\r\n        this._audioComp.volume = 0.5;\r\n        this._audioComp.play();\r\n    }\r\n\r\n    /**\r\n     * @en : stop bgm\r\n     * @cn : 停止背景音乐\r\n     */\r\n    public stopBgm() {\r\n        this._audioComp.stop();\r\n    }\r\n\r\n    /**\r\n     * @en : play audio clip in one time, for effect usage\r\n     * @cn : 播放一次音效\r\n     * @param {string} clip\r\n     * @param {*} scale\r\n     */\r\n    public play(clip: string, scale = 0.6) {\r\n        this._effectComp.playOneShot(RES.getClip(clip), scale);\r\n    }\r\n    /**\r\n     * @description: Play loop Audio\r\n     * @param {string} audio\r\n     * @return {*}\r\n     */\r\n    public loop(audio: string) {\r\n\r\n        let clip = RES.getClip(audio);\r\n        this._audioLoopComp.stop();\r\n        this._audioLoopComp.clip = clip;\r\n        this._audioLoopComp.loop = true;\r\n        this._audioLoopComp.play();\r\n        this._curLoopAudioName = audio;\r\n    }\r\n\r\n    public stoploop() {\r\n        this._audioLoopComp.stop();\r\n    }\r\n\r\n}\r\n\r\nconst SOUND = new SoundMgr;\r\n\r\nexport default SOUND;"]}