System.register("chunks:///_virtual/ActionConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameCore.ts","./Enums.ts","./KeyConfigView.ts"],(function(t){var e,n,i,o,a,r,c,s,l,u,f,d,p,h,m,b,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){c=t.cclegacy,s=t._decorator,l=t.Label,u=t.sys,f=t.KeyCode,d=t.director,p=t.Component},function(t){h=t.aa},function(t){m=t.events,b=t.ui},function(t){v=t.KeyConfigView}],execute:function(){var g,_,y,w,A;c._RF.push({},"84c95pUlIVN9qEiJq1/q9lF","ActionConfig",void 0);var C=s.ccclass,k=s.property,K=h.ctrl;t("ActionConfig",(g=C("ActionConfig"),_=k(l),g((A=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"labels",A,o(e)),e.time=0,e._moveForward={down:function(){K.h=1},up:function(){K.h>0&&(K.h=0)}},e._moveBackward={down:function(){K.h=-1},up:function(){K.h<0&&(K.h=0)}},e._moveLeft={down:function(){K.v=-1},up:function(){K.v<0&&(K.v=0)}},e._moveRight={down:function(){K.v=1},up:function(){K.v>0&&(K.v=0)}},e._danceAction={down:function(){e.jump()}},e._rapAction={down:function(){e.rap()}},e._basketballAction={down:function(){e.ball()}},e._skillConfigs={dance:{time:0,cd:5},rap:{time:0,cd:5},basketball:{time:0,cd:5}},e}n(e,t);var c=e.prototype;return c.onEnable=function(){u.isMobile||K.add("forward",[f.KEY_W],this._moveForward,this.labels[0]).add("backward",[f.KEY_S],this._moveBackward,this.labels[1]).add("left",[f.KEY_A],this._moveLeft,this.labels[2]).add("right",[f.KEY_D],this._moveRight,this.labels[3]).add("dance",[f.KEY_X],this._danceAction,this.labels[4]).add("rap",[f.KEY_C],this._rapAction,this.labels[5]).add("basketball",[f.KEY_K],this._basketballAction,this.labels[6])},c.onDisable=function(){u.isMobile||K.remove("forward").remove("backward").remove("left").remove("right").remove("dance").remove("rap").remove("ball")},c.showConfig=function(){var t=a(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.res.getUI(b.ConfigView);case 2:t.sent.getComponent(v).init(this);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.rap=function(){h.ctrl.isPlaying||(d.emit(m.playerAnm,"rap"),h.ctrl.isPlaying=!0,this.time=3.5)},c.jump=function(){h.ctrl.isPlaying||(d.emit(m.playerAnm,"dance"),h.ctrl.isPlaying=!0,this.time=4)},c.ball=function(){h.ctrl.isPlaying||(d.emit(m.playerAnm,"basketball"),h.ctrl.isPlaying=!0,this.time=3.5)},c.update=function(t){this.time<=0?h.ctrl.isPlaying=!1:this.time-=t},e}(p)).prototype,"labels",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=w))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./FrameCore.ts"],(function(e){var i,t,n,r,o,s,a,l,u,c,h,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Node,l=e.Vec3,u=e.Component},function(e){c=e.Props,h=e.Clips},function(e){p=e.aa}],execute:function(){var d,w,f,b,y,A,g,B,V,m,v,z,O,D,C,I,S,E,R,N,_,F,P,T,L,Z,j;o._RF.push({},"29938V4SlNABr3n+tOEsozR","BaseView",void 0);var k=s.ccclass,x=s.property;e("BaseView",(d=k("BaseView"),w=x({displayOrder:0,group:c.View}),f=x({type:a,visible:function(){return this.tweenView},displayOrder:0,group:c.View}),b=x({visible:function(){return this.tweenView},displayOrder:0,group:c.View}),y=x({displayOrder:0,group:c.View}),A=x({group:c.Ad,tooltip:"show Banner on Start"}),g=x({visible:function(){return this.showBannerAd},range:[0,5],group:c.Ad}),B=x({visible:function(){return this.showBannerAd},group:c.Ad,tooltip:"hide Banner on Start"}),V=x({visible:function(){return this.showBannerAd},group:c.Ad}),m=x({group:c.Ad,tooltip:"show Intersitial Ad on Start"}),v=x({visible:function(){return this.showIntersitialAd},range:[0,5],group:c.Ad}),z=x({group:c.Ad,tooltip:"show video Ad on Start"}),O=x({visible:function(){return this.showVideoAd},range:[0,5],group:c.Ad}),d((I=i((C=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,n(i,"tweenView",I,r(i)),n(i,"root",S,r(i)),n(i,"tweenTime",E,r(i)),n(i,"playBtnClip",R,r(i)),n(i,"showBannerAd",N,r(i)),n(i,"bannerDelay",_,r(i)),n(i,"hideBannerOnClose",F,r(i)),n(i,"displayinSmallscreen",P,r(i)),n(i,"showIntersitialAd",T,r(i)),n(i,"intersitialDelay",L,r(i)),n(i,"showVideoAd",Z,r(i)),n(i,"videoDelay",j,r(i)),i}t(i,e);var o=i.prototype;return o.onEnable=function(){var e=this;this.playBtnClip&&p.sound.play(h.btn),this.tweenView&&(this.root?(this.root.setScale(l.ZERO),p.utils.fadeIn(this.root)):(this.root=this.node,this.root.setScale(l.ZERO),this.scheduleOnce((function(){p.utils.fadeIn(e.root)})))),this.showAds()},o.onDisable=function(){this.hideBannerOnClose&&this.closeAd()},o.close=function(){var e=this;this.playBtnClip&&p.sound.play(h.btn,.5),this.showBannerAd&&this.closeAd(),this.tweenView?(this.root||(this.root=this.node),p.utils.fadeOut(this.root,(function(){p.res.putNode(e.node)}))):p.res.putNode(this.node)},o.showAds=function(){var e=this;this.showBannerAd&&this.scheduleOnce((function(){e.showBanner()}),this.bannerDelay),this.showIntersitialAd&&this.scheduleOnce((function(){e.showIntersitial()}),this.intersitialDelay),this.showVideoAd&&this.scheduleOnce((function(){e.showVideo()}),this.bannerDelay)},o.closeAd=function(){},o.showBanner=function(){},o.showVideo=function(e){},o.showIntersitial=function(){},i}(u)).prototype,"tweenView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=i(C.prototype,"root",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(C.prototype,"tweenTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),R=i(C.prototype,"playBtnClip",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=i(C.prototype,"showBannerAd",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=i(C.prototype,"bannerDelay",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=i(C.prototype,"hideBannerOnClose",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=i(C.prototype,"displayinSmallscreen",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=i(C.prototype,"showIntersitialAd",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=i(C.prototype,"intersitialDelay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=i(C.prototype,"showVideoAd",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=i(C.prototype,"videoDelay",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=C))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameCore.ts"],(function(t){var e,i,r,o,a,n,s,u,l,h,c,p,g,d,R,_,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,s=t._decorator,u=t.Vec3,l=t.Quat,h=t.Vec2,c=t.Node,p=t.macro,g=t.input,d=t.Input,R=t.sys,_=t.lerp,f=t.Component},function(t){y=t.aa}],execute:function(){var b,m,w,T,v,C,S,x,E,z,O,M,D,P,H,k,U,A,L,j,I;n._RF.push({},"6be7d8BhlpJFobtMkxMXvVa","CameraCtrl",void 0);var F=s.ccclass,W=s.property,B=s.type,N=s.executeInEditMode,V=new u,Y=new u,Q=new l,X=new h,J=new h;t("default",(b=F("CameraCtrl"),m=N(!0),w=B(c),T=B(c),v=W({visible:!1}),C=W({visible:!1}),b(S=m((E=e((x=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,r(e,"enableTouch",E,o(e)),r(e,"enableScaleRadius",z,o(e)),r(e,"rotateSpeed",O,o(e)),r(e,"followSpeed",M,o(e)),r(e,"xRotationRange",D,o(e)),r(e,"_target",P,o(e)),r(e,"targetHeight",H,o(e)),r(e,"radiusScaleSpeed",k,o(e)),r(e,"minRadius",U,o(e)),r(e,"maxRadius",A,o(e)),r(e,"followTargetRotationY",L,o(e)),r(e,"_startRotation",j,o(e)),r(e,"_targetRadius",I,o(e)),e._center=new u,e._targetCenter=new u,e._touched=!1,e._targetRotation=new u,e._rotation=new l,e._radius=10,e.dis=0,e}i(e,t);var n=e.prototype;return n.start=function(){},n.init=function(){p.ENABLE_MULTI_TOUCH=!0,this.enableTouch&&(g.on(d.EventType.TOUCH_START,this.onTouchStart,this),g.on(d.EventType.TOUCH_MOVE,this.onTouchMove,this),g.on(d.EventType.TOUCH_END,this.onTouchEnd,this),g.on(d.EventType.TOUCH_CANCEL,this.onTouchEnd,this)),this.resetTargetRotation(),l.fromEuler(this._rotation,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),this.target&&(this._targetCenter.set(this.target.worldPosition),this._center.set(this._targetCenter)),this._radius=this.radius,this.limitRotation(),this.enableScaleRadius&&R.platform==R.Platform.DESKTOP_BROWSER&&g.on(d.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},n.resetTargetRotation=function(){var t=this._targetRotation.set(this._startRotation);this.followTargetRotationY&&(t=Y.set(t),l.toEuler(V,this.target.worldRotation),t.y+=V.y)},n.onTouchStart=function(t){this._touched=!0},n.onTouchMove=function(t){if(this._touched){var e=t.touch,i=t.getAllTouches();if(i.length>1&&!y.ctrl.joystick){var r=null,o=null;if(t.getTouches().length>1)r=i[0],o=i[1];else for(var a=(r=e).getID(),n=0;n<i.length;n++){var s=i[n];if(s.getID()!==a){o=s;break}}r.getLocation(X),o.getLocation(J);var u=h.distance(X,J),l=u-this.dis;this._targetRadius+=this.radiusScaleSpeed*-Math.sign(l)*.3,this._targetRadius=Math.min(this.maxRadius,Math.max(this.minRadius,this._targetRadius)),this.dis=u}X=e.getDelta(),this.setRotate(X)}},n.onTouchEnd=function(){this._touched=!1},n.setRotate=function(t){l.fromEuler(Q,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),l.rotateX(Q,Q,.005*-t.y),l.rotateAround(Q,Q,u.UP,.005*-t.x),l.toEuler(this._targetRotation,Q),this.limitRotation()},n.onMouseWheel=function(t){var e=t.getScrollY();this._targetRadius+=this.radiusScaleSpeed*-Math.sign(e),this._targetRadius=Math.min(this.maxRadius,Math.max(this.minRadius,this._targetRadius))},n.limitRotation=function(){var t=this._targetRotation;t.x<this.xRotationRange.x?t.x=this.xRotationRange.x:t.x>this.xRotationRange.y&&(t.x=this.xRotationRange.y),t.z=0},n.lateUpdate=function(t){this.resetCam(t)},n.resetCam=function(t){if(this.target){var e=this._targetRotation;this._targetCenter.set(this.target.worldPosition),this._targetCenter.y+=this.targetHeight,l.fromEuler(Q,e.x,e.y,e.z),l.slerp(this._rotation,this._rotation,Q,7*t*this.rotateSpeed),u.lerp(this._center,this._center,this._targetCenter,5*t*this.followSpeed),this._radius=_(this._radius,this._targetRadius,10*t),u.transformQuat(V,u.FORWARD,this._rotation),u.multiplyScalar(V,V,this._radius),V.add(this._center),this.node.position=V,this.node.lookAt(this._center)}},a(e,[{key:"radius",get:function(){return this._targetRadius},set:function(t){this._targetRadius=t}},{key:"target",get:function(){return this._target},set:function(t){this._target=t,this._targetRotation.set(this._startRotation),this._targetCenter.set(t.worldPosition)}},{key:"preview",get:function(){return!1},set:function(t){this.resetCam(.1)}},{key:"targetRotation",get:function(){return this._startRotation},set:function(t){this._targetRotation.set(t),this._startRotation.set(t)}}]),e}(f)).prototype,"enableTouch",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=e(x.prototype,"enableScaleRadius",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=e(x.prototype,"rotateSpeed",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=e(x.prototype,"followSpeed",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=e(x.prototype,"xRotationRange",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(5,70)}}),P=e(x.prototype,"_target",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(x.prototype,"targetHeight",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=e(x.prototype,"radiusScaleSpeed",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=e(x.prototype,"minRadius",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),A=e(x.prototype,"maxRadius",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),L=e(x.prototype,"followTargetRotationY",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(x.prototype,"radius",[W],Object.getOwnPropertyDescriptor(x.prototype,"radius"),x.prototype),e(x.prototype,"target",[T],Object.getOwnPropertyDescriptor(x.prototype,"target"),x.prototype),e(x.prototype,"preview",[W],Object.getOwnPropertyDescriptor(x.prototype,"preview"),x.prototype),e(x.prototype,"targetRotation",[W],Object.getOwnPropertyDescriptor(x.prototype,"targetRotation"),x.prototype),j=e(x.prototype,"_startRotation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),I=e(x.prototype,"_targetRadius",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),S=x))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/CoinBarView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,i,n,t,a,o,c,l,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,c=e._decorator,l=e.Label,s=e.Component}],execute:function(){var u,p,f,b,y;o._RF.push({},"1a313NfIadDYbJy3M4XuVRc","CoinBarView",void 0);var h=c.ccclass,B=c.property;e("CoinBarView",(u=h("CoinBarView"),p=B(l),u((y=r((b=function(e){function r(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(r,"coinBarLabel",y,t(r)),r}return i(r,e),a(r,[{key:"coin",get:function(){return this.coinBarLabel.string},set:function(e){this.coinBarLabel.string=e}}]),r}(s)).prototype,"coinBarLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/CoinMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameCore.ts","./Enums.ts","./CoinBarView.ts","./PlayerCtrl.ts","./CoinView.ts"],(function(e){var i,n,o,t,r,a,s,c,l,h,u,p,C,_;return{setters:[function(e){i=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){t=e.cclegacy,r=e._decorator,a=e.Vec3,s=e.Layers,c=e.tween,l=e.Component},function(e){h=e.aa},function(e){u=e.ui},function(e){p=e.CoinBarView},function(e){C=e.PlayerCtrl},function(e){_=e.CoinView}],execute:function(){var m;t._RF.push({},"6768eoy0odLAJdLgnRSqgBt","CoinMgr",void 0);var w=r.ccclass,v=(r.property,new a),f=new a,y=new a,d=new a(4.8,4.8,4.8);e("CoinMgr",w("CoinMgr")(m=function(e){function t(){for(var i,n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];return(i=e.call.apply(e,[this].concat(o))||this)._time=0,i._interval=3,i._coins=50,i._coinView=void 0,i._coinViewComp=void 0,i._coinBarView=void 0,i._coinBarViewComp=void 0,i._currentCoins=0,i._playerPos=new a,i}i(t,e);var r=t.prototype;return r.start=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.res.getUI(u.CoinView);case 2:return this._coinView=e.sent,this._coinViewComp=this._coinView.getComponent(_),e.next=6,h.res.getUI(u.CoinBarView);case 6:this._coinBarView=e.sent,this._coinBarViewComp=this._coinBarView.getComponent(p);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.spawnCoins=function(e){this._coins>0&&(this._coins--,this.createCoin()),this._time+=e,this._time>this._interval&&(this._time=0,this._interval=3+2*Math.random(),h.layer3D[2].children.length<75&&(this._coins+=Math.floor(6+6*Math.random())))},r.createCoin=function(){var e=40*Math.random()-20,i=40*Math.random()-20,n=h.res.getNode("Coin",h.layer3D[2],a.set(f,e,.5,i));n.setScale(.5,.5,.5),n.setRotationFromEuler(90,0,0),n.layer=s.Enum.DEFAULT},r.collectCoins=function(e,i){var n=i.length,o=Math.min(1,.2+.02*n);h.global.player.getComponent(C).wave(o),h.cameras[1].worldToScreen(this._coinView.worldPosition,y);var t=new a;h.cameras[0].screenToWorld(y,t),this._coinViewComp.addCoin(n);for(var r=function(){var n=i[l];n.parent=h.layer3D[4],n.layer=s.Enum.UI_3D,n.setRotationFromEuler(90,0,0);var o=l*e;c(n).delay(o).to(.5+o,{position:t,scale:d},{easing:"fade"}).call((function(){h.res.putNode(n)})).start()},l=n-1;l>=0;l--)r()},r.updateCoinBar=function(e){if(this._coinBarViewComp){var i=e.length;a.copy(v,this._playerPos),v.y+=1.5+.075*(i+1),h.cameras[0].convertToUINode(v,h.layer2D[4],v),this._coinBarView.position=v,this._currentCoins!=i&&(this._currentCoins=i,this._coinBarViewComp.coin="Coins "+i)}},r.checkCoins=function(){for(var e=h.layer3D[2].children,i=h.layer3D[3],n=e.length-1;n>=0;n--){var o=e[n];h.utils.getMdisXZ(o.position,this._playerPos)<.5&&(o.parent=i,o.setRotationFromEuler(0,0,0))}},r.moveCoins=function(e,i){var n=i.length;if(!h.global.isMove&&n>0)this.collectCoins(e,i);else if(n>=50)this.collectCoins(e,i);else for(var o=n-1;o>=0;o--){var t=i[o];a.copy(v,this._playerPos),v.y+=1.4+.075*(n-o);var r=e*Math.max(1,19-.35*(n-o));t.position=a.lerp(f,t.position,v,r)}},r.update=function(e){a.copy(this._playerPos,h.global.player.position),this.spawnCoins(e);var i=h.layer3D[3].children;this.moveCoins(e,i),this.checkCoins(),this.updateCoinBar(i)},t}(l))||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/CoinView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,t,e,o,r,c,a,s,l,u;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized,r=n.createClass},function(n){c=n.cclegacy,a=n._decorator,s=n.Label,l=n.tween,u=n.Component}],execute:function(){var p,h,f,C,_;c._RF.push({},"b389aLlGhBKdrhCm9RJP1Ze","CoinView",void 0);var y=a.ccclass,b=a.property;n("CoinView",(p=y("CoinView"),h=b(s),p((_=i((C=function(n){function i(){for(var i,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return i=n.call.apply(n,[this].concat(r))||this,e(i,"coinLabel",_,o(i)),i._coin=0,i._currentCoin=0,i}return t(i,n),i.prototype.addCoin=function(n){this._currentCoin+=n;var t=this.getComponent(i),e=.03*n+.3;l(t).to(e,{coin:this._currentCoin}).start()},r(i,[{key:"coin",get:function(){return this._coin},set:function(n){this._coin=Math.floor(n),this.coinLabel.string=""+this._coin}}]),i}(u)).prototype,"coinLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["cc","./Enums.ts"],(function(e){var t,n,r,o,a,i,u,s,c,f,l,d;return{setters:[function(e){t=e.cclegacy,n=e.Vec3,r=e.UIRenderer,o=e.sys,a=e.Layers,i=e.view,u=e.Node,s=e.UITransform,c=e.Widget,f=e.Sprite,l=e.tween},function(e){d=e.DataType}],execute:function(){e("quatFromAngleY",(function(e,t){return t*=g,e.x=e.z=0,e.y=Math.sin(t),e.w=Math.cos(t),e})),t._RF.push({},"55194GHJUNN+Ig1/aUmx7KT","CommonUtils",void 0);var g=.5*Math.PI/180,h=new n(1,1,1),v=new n(0,0,0);e("default",new(function(){function e(){}var t=e.prototype;return t.hideRender=function(e){var t=e.getComponent(r);t&&(t._renderFlag=!1,t._renderEntity.enabled=!1)},t.showRender=function(e){var t=e.getComponent(r);t&&(t._renderFlag=!0,t._renderEntity.enabled=!0)},t.hideRenders=function(e){e.getComponentsInChildren(r).forEach((function(e){e._renderFlag=!1,e._renderEntity.enabled=!1}))},t.showRenders=function(e){e.getComponentsInChildren(r).forEach((function(e){e._renderFlag=!0,e._renderEntity.enabled=!0}))},t.save=function(e,t){"number"==typeof t&&(t=""+t),this.saveLocalStorage(e,t||"")},t.load=function(e,t){void 0===t&&(t=d.NUMBER);var n=this.loadLocalStorage(e);if(n){switch(t){case d.STRING:break;case d.NUMBER:n=Number(n);break;case d.OBJECT:n=JSON.parse(n)}return n}return null},t.saveLocalStorage=function(e,t){o.localStorage.setItem(e,t||"")},t.loadLocalStorage=function(e){return o.localStorage.getItem(e)},t.formatPercentage=function(e){return e<2?(100*e).toFixed(1)+"%":e},t.traverseObject=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t(n,r),"object"==typeof r&&this.traverseObject(r,t)}},t.getDay=function(){return Math.floor(Date.now()/864e5)},t.createUI=function(e,t){void 0===e&&(e="uiNode"),void 0===t&&(t=a.Enum.UI_2D);var n=i.getVisibleSize(),r=new u(e);r.addComponent(s).setContentSize(n);var o=r.addComponent(c);return o.isAlignLeft=o.isAlignTop=o.isAlignTop=o.isAlignBottom=!0,o.right=o.left=o.top=o.bottom=0,r.layer=t,r},t.getDateId=function(){var e=new Date,t=e.getDay().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString();return Math.floor(Number(t)+.1*Math.floor(Math.random()*(5e5*Math.random()+5e4))).toString()},t.isEn=function(){return-1==navigator.language.indexOf("zh")},t.clearUI=function(e,t){var n=this;if(void 0===t&&(t=!0),t){var r=e.getComponent(f);r&&this.clearSprite(r);var o=e.getComponentsInChildren(f);o.length>0&&o.forEach((function(e){n.clearSprite(e)}))}e.destroy()},t.MoveTowards=function(e,t,n){var r=t[0]-e.x,o=t[1]-e.y,a=r*r+o*o;if(0==a||n>=0&&a<=n*n)return e.set(t[0],t[1]),!0;var i=Math.sqrt(a);return e.x=+r/i*n,e.y=+o/i*n,!1},t.fadeIn=function(e,t){void 0===t&&(t=.2),l(e).set({scale:n.ZERO}).to(t,{scale:h}).start()},t.fixedTo=function(e,t){void 0===t&&(t=2);var n=10^t;return e=Math.floor(e*n)/n},t.getRandomTarget=function(e){var t=e.length;return t>0?e[Math.floor(t*Math.random())]:null},t.getQueryVariable=function(e){var t=decodeURIComponent(window.location.href).split("?")[1];if(t)for(var n=t.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(o[0]==e)return o[1]}return null},t.getCloestNode=function(e,t){var n,r=t.length;if(r>0)for(var o=1e4,a=0;a<r;a++){var i=t[a],u=this.getNodesDis(i,e);u<o&&(o=u,n=i)}else n=null;return n},t.getNodesDis=function(e,t){return this.getMdis2D(e.position,t.position)},t.getOne=function(){return Math.random()>.5?1:-1},t.getMdis2D=function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},t.getMdisXZ=function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.z-e.z)},t.fadeOut=function(e,t){l(e).to(.2,{scale:v},{easing:"elasticOut"}).call((function(){t&&t()})).start()},t.clearSprite=function(e){var t=e.spriteFrame;if(t&&(e.spriteFrame=null,t&&t.refCount>0)){t.decRef();var n=t.texture;this.clearTex(n)}},t.clearTex=function(e){if(e&&e.refCount>0){e.decRef();var t=e.image;t&&t.refCount>0&&t.decRef()}},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,a,n,o,l,s,p,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e._decorator,n=e.CCString,o=e.Prefab,l=e.SpriteFrame,s=e.JsonAsset,p=e.AudioClip,u=e.SpriteAtlas,c=e.Material}],execute:function(){var h,y,f,m,b,d,g,w,C,P,E,D,I,S,U,A,T,M,v,B,V,z,L,N;i._RF.push({},"39f4cB5mBBD+L0+wGMDYvJe","Enums",void 0);var k=a.ccclass,J=a.property,Q=(e("adConfig",(h=k("adConfig"),y=J({type:n}),f=J({type:n}),m=J({type:n}),b=J({type:n}),h((w=t((g=function(){r(this,"platform",w,this),r(this,"id",C,this),r(this,"bannerId",P,this),r(this,"intersitialId",E,this),r(this,"videoId",D,this),r(this,"customId",I,this)}).prototype,"platform",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"platform"}}),C=t(g.prototype,"id",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=t(g.prototype,"bannerId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(g.prototype,"intersitialId",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(g.prototype,"videoId",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(g.prototype,"customId",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=g))||d)),e("shareContent",k("shareContent")((A=t((U=function(){r(this,"shareId",A,this),r(this,"shareLink",T,this),r(this,"shareText",M,this)}).prototype,"shareId",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=t(U.prototype,"shareLink",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=t(U.prototype,"shareText",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"share tittle"}}),S=U))||S));e("shareConfig",(v=k("shareConfig"),B=J({type:Q}),v((L=t((z=function(){r(this,"platform",L,this),r(this,"sharePics",N,this)}).prototype,"platform",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"platform"}}),N=t(z.prototype,"sharePics",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=z))||V)),e("collisions",{DEFAULT:1,player:2,trap:4,water:8,brick:16,enemy:32}),e("ui",{JoystickView:{name:"JoystickView",layer:1,clear:!1},ActionView:{name:"ActionView",layer:2,clear:!1},ConfigView:{name:"ConfigView",layer:3,clear:!1},CoinView:{name:"CoinView",layer:4,clear:!1},CoinBarView:{name:"CoinBarView",layer:5,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1}}),e("itemState",function(e){return e[e.OWNEQUIPED=0]="OWNEQUIPED",e[e.EQUIPED=1]="EQUIPED",e[e.NEWEQUIP=2]="NEWEQUIP",e[e.UNEQUIPED=3]="UNEQUIPED",e}({})),e("DataType",function(e){return e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.OBJECT=2]="OBJECT",e}({})),e("events",{changeCharacter:"changeCharacter",shakeCam:"shakeCam",playerAnm:"playerAnm",initLevel:"initLevel",gameWin:"gameWin",startDraw:"startDraw",finishDraw:"finishDraw",showResult:"showResult",buildMap:"buildMap",paperOcacity:"paperOcacity",editMap:"editMap",playMap:"playMap",rollBg:"rollBg",changeTop:"changeTop",catWatch:"catWatch",Toast:"toast",Anm:"anm"}),e("anms",{cry:"cry",idle:"idle",hurt:"hurt",happy:"happy"}),e("StorageKeys",{CharacterData:"CharacterData"}),e("Key",{MapData:"MapData",CurrentPen:"CurrentPen",Sound:"Sound",Bgm:"Bgm",Pens:"Pens",Pause:"Pause",Timer:"Timer",Level:"Level",Frost:"Frost",Undo:"Undo",Energy:"Energy",Star:"Star"}),e("Props",{Scenes:"Scenes",Layers:"Layers",Comps:"Components",ShareConfig:"ShareConfig",Setting:"Setting",View:"View",AdConfig:"AdConfig",Ad:"Advertisement"}),e("Clips",{hurt:"hurt",happy:"happy",bgm:"bgm",photo:"photo",counter:"counter",btn:"btn",touch:"touch",gold:"gold",reward:"reward",merge:"merge",win:"win",lose:"lose"}),e("AssetType",{Prefab:{type:o,path:"Preload/Prefabs"},Sprite:{type:l,path:"Preload/Sprite"},UiPrefab:{type:o,path:"Preload/UI"},Json:{type:s,path:"Preload/Jsons/"},Sound:{type:p,path:"Preload/Clips/"},Atlas:{type:u,path:"Preload/Atlas/"},Material:{type:c,path:"Preload/Materials/"}});i._RF.pop()}}}));

System.register("chunks:///_virtual/FrameCore.ts",["cc","./InputCtrl.ts","./ResMgr.ts","./SoundMgr.ts","./Globals.ts","./CommonUtils.ts"],(function(t){var a,e,s,r,n,u;return{setters:[function(t){a=t.cclegacy},function(t){e=t.default},function(t){s=t.default},function(t){r=t.default},function(t){n=t.default},function(t){u=t.default}],execute:function(){t("aa",void 0),a._RF.push({},"6de7cULQvZAIZrlgTbrswg4","FrameCore",void 0);var c,l;(l=c||(c=t("aa",{}))).res=s,l.sound=r,l.ctrl=e,l.utils=u,l.fsm="",l.global=n,l.canvas=n.canvas,l.cameras=n.cameras,l.layer2D=n.layer2D,l.layer3D=n.layer3D,l.states={isPause:!0},a._RF.pop()}}}));

System.register("chunks:///_virtual/Globals.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"9449f1p6JZKw6/Ff9myo8uZ","Globals",void 0);s("default",new function(){this.canvas=[],this.cameras=[],this.layer2D=[],this.layer3D=[],this.player=void 0,this.isPause=!1,this.isMove=!1});t._RF.pop()}}}));

System.register("chunks:///_virtual/InputCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,s,a,h;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e.KeyCode,r=e.sys,o=e.input,s=e.Input,a=e.director,h=e.game}],execute:function(){e("getComboName",l),i._RF.push({},"5c6d04GKhtIhZfOxtrlpxQT","InputCtrl",void 0);function l(e){var t="";return e.forEach((function(e){t.length>0&&(t+="+");var i=n[e].replace("KEY_","");i=i.replace("DIGIT_",""),t+=i})),t}function u(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}e("default",new(function(){function e(){if(this.h=0,this.v=0,this.mag=1,this.jump=!1,this.rad=0,this.joystick=!1,this.rap=!1,this.isPlaying=!1,this.keyEventMap=new Map,this.keyState=new Map,this.tempCombo=[],this.tempBinding=null,this.keyBindingMap=new Map,this.timer=null,this.lastKeyTime=0,!r.isMobile){o.on(s.EventType.KEY_DOWN,this.onKeyDown,this),o.on(s.EventType.KEY_UP,this.onKeyUp,this);var e=this;document.addEventListener("visibilitychange",(function(){document.hidden&&(e.timer&&clearTimeout(e.timer),e.h=e.v=0,e.mag=1)}))}}var i=e.prototype;return i.add=function(e,t,i,n){var r=this.keyBindingMap.get(e);r&&this.removeKey(r.combo);var o={combo:t,event:i,label:n};return this.keyBindingMap.set(e,o),this.addKey(t,i),n&&(n.string=l(t)),this},i.clear=function(e){var t=this.keyBindingMap.get(e);return t&&(t.combo.length=0,t.label&&(t.label.string="")),this},i.remove=function(e){var t=this.keyBindingMap.get(e);return t&&(this.removeKey(t.combo),this.keyBindingMap.delete(e),t.label&&(t.label.string="")),this},i.get=function(e){return this.keyBindingMap.get(e)||null},i.updateConfig=function(e,i,n){var r=this.keyBindingMap.get(e);if(!r)return console.log("no event founded==",e),this;i.sort();for(var o,s=t(this.keyBindingMap.keys());!(o=s()).done;){var h=o.value;if(u(this.keyBindingMap.get(h).combo,i)){a.emit("duplicateKey",h),this.clear(h);break}}r.combo.length=0;for(var g=0;g<i.length;g++)r.combo[g]=i[g];var p=l(i);return r.label&&(r.label.string=p),n&&(n.string=p),this},i.clearBinding=function(){this.tempBinding=null},i.updateBinding=function(e,t){this.tempBinding={name:e,label:t}},i.getKeys=function(){for(var e,i=[],n=t(this.keyBindingMap.keys());!(e=n()).done;){var r=e.value;i.push(r)}return i},i.addKey=function(e,t){return e.sort(),this.keyEventMap.set(e,t),this},i.removeKey=function(e){return this.keyEventMap.delete(e),this},i.onKeyDown=function(e){var i=e.keyCode;if(this.tempBinding)this.handleBindingConfig(i);else{this.keyState.set(i,!0);for(var n,r=t(this.keyEventMap.keys());!(n=r()).done;){for(var o=n.value,s=!1,a=o.length,h=0;h<a;h++){var l=o[h];if(!(s=this.keyState.get(l)))break}if(s){this.keyState.set(i,!1);var u=this.keyEventMap.get(o);u.down&&u.down();break}}}},i.handleBindingConfig=function(e){var t=this,i=this.tempBinding,n=h.totalTime;n-this.lastKeyTime>150&&(this.tempCombo.length=0),this.tempCombo.length>=3&&this.tempCombo.shift(),this.tempCombo.push(e);var r=i.name,o=i.label;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.updateConfig(r,t.tempCombo,o),t.timer=null}),150),this.lastKeyTime=n},i.onKeyPress=function(e){e.keyCode},i.onKeyUp=function(e){var i=e.keyCode;if(!this.tempBinding){this.keyState.set(i,!1);for(var n,r=t(this.keyEventMap.keys());!(n=r()).done;){for(var o=n.value,s=!1,a=o.length,h=0;h<a;h++){if(i==o[h]){s=!0;break}}if(s){var l=this.keyEventMap.get(o);l.up&&l.up();break}}}},e}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/JoystickCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InputCtrl.ts"],(function(t){var i,o,e,n,r,s,a,c,h,u,l,p,y,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,c=t.Vec2,h=t.Quat,u=t.Node,l=t.UIOpacity,p=t.tween,y=t.Component},function(t){f=t.default}],execute:function(){var d,m,v,E,T,w,C,j,A,O,g,b;r._RF.push({},"0df005HeCFHbLgcmwtx6QL2","JoystickCtrl",void 0);var x=s.ccclass,S=s.property,k=new a,U=new c,_=new h,H=Math.PI/180;t("JoystickCtrl",(d=x("JoystickCtrl"),m=S({type:u}),v=S({type:u}),E=S({type:u}),T=S({type:u}),d((j=i((C=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"maxRadius",j,n(i)),e(i,"touchArea",A,n(i)),e(i,"control",O,n(i)),e(i,"indexArrow",g,n(i)),e(i,"joyStick",b,n(i)),i.distance=0,i.startPos=new a,i.jumpBtn=null,i.arrowOp=null,i}o(i,t);var r=i.prototype;return r.start=function(){this.init()},r.init=function(){this.joyStick.getPosition(this.startPos)},r.onEnable=function(){this.touchArea.on(u.EventType.TOUCH_START,this.touchStart,this),this.touchArea.on(u.EventType.TOUCH_MOVE,this.touchMove,this),this.touchArea.on(u.EventType.TOUCH_END,this.touchEnd,this),this.touchArea.on(u.EventType.TOUCH_CANCEL,this.touchEnd,this),this.arrowOp=this.indexArrow.getComponent(l),this.arrowOp||(this.arrowOp=this.indexArrow.addComponent(l)),this.jumpBtn&&this.jumpBtn.on(u.EventType.TOUCH_END,this.jump,this),this.arrowOp.opacity=0},r.onDisable=function(){this.touchArea.off(u.EventType.TOUCH_START,this.touchStart,this),this.touchArea.off(u.EventType.TOUCH_MOVE,this.touchMove,this),this.touchArea.off(u.EventType.TOUCH_END,this.touchEnd,this),this.touchArea.off(u.EventType.TOUCH_CANCEL,this.touchEnd,this),this.jumpBtn&&this.jumpBtn.off(u.EventType.TOUCH_END,this.jump,this)},r.touchStart=function(t){this.joyStick.active&&(f.joystick=!0,p(this.arrowOp).to(.5,{opacity:255}).start(),this.joyStick.setWorldPosition(t.getUILocation().x,t.getUILocation().y,0))},r.touchMove=function(t){if(this.joyStick.active){t.getUILocation(U),this.joyStick.getWorldPosition(k),U.x-=k.x,U.y-=k.y,this.distance=U.lengthSqr(),this.distance=Math.min(this.distance,this.maxRadius),U.normalize(),f.mag=this.distance/this.maxRadius*1.2,f.h=U.y,f.v=U.x,U.multiplyScalar(this.distance);var i=-Math.atan2(U.x,U.y)/H;this.indexArrow.rotation=h.fromAngleZ(_,i),this.control.setPosition(U.x,U.y)}},r.jump=function(){f.jump=!0},r.touchEnd=function(){this.joyStick.active&&(f.joystick=!1,p(this.arrowOp).to(.6,{opacity:0}).start(),f.mag=1,f.h=0,f.v=0,this.control.setPosition(a.ZERO),this.joyStick.setPosition(this.startPos))},i}(y)).prototype,"maxRadius",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),A=i(C.prototype,"touchArea",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(C.prototype,"control",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(C.prototype,"indexArrow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(C.prototype,"joyStick",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/KeyBindingView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,o,a,l,c,s,u,y,p,b;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.Color,s=e.Sprite,u=e.Label,y=e.Node,p=e.director,b=e.Component}],execute:function(){var h,f,g,m,d,k,K,w,L;a._RF.push({},"77181mmK35CCIwYssk05KpT","KeyBindingView",void 0);var v=l.ccclass,N=l.property,C=new c(100,100,100,200),B=new c(100,100,100,100);e("KeyBindingView",(h=v("KeyBindingView"),f=N(s),g=N(u),m=N(u),h((K=i((k=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(i=e.call.apply(e,[this].concat(o))||this).key="",n(i,"bg",K,r(i)),n(i,"nameLabel",w,r(i)),n(i,"keyLabel",L,r(i)),i}t(i,e);var a=i.prototype;return a.onEnable=function(){this.bg.node.on(y.EventType.TOUCH_END,this.onSelect,this),p.on("duplicateKey",this.clearKeyName,this)},a.onDisable=function(){this.bg.node.off(y.EventType.TOUCH_END,this.onSelect,this),p.off("duplicateKey",this.clearKeyName,this)},a.clearKeyName=function(e){this.key==e&&(this.keyName="")},a.onSelect=function(){this.color=!0,p.emit("KeyBindingSelect",this)},o(i,[{key:"bindingName",set:function(e){this.nameLabel&&(this.nameLabel.string=e,this.key=e)}},{key:"keyName",set:function(e){this.keyLabel&&(this.keyLabel.string=e)}},{key:"color",set:function(e){this.bg.color=e?C:B}}]),i}(b)).prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(k.prototype,"nameLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(k.prototype,"keyLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=k))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/KeyConfigView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KeyBindingView.ts","./InputCtrl.ts","./FrameCore.ts","./BaseView.ts"],(function(i){var n,e,t,r,o,l,c,a,s,u,g,f,h,b;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,c=i.Node,a=i.Prefab,s=i.director,u=i.instantiate},function(i){g=i.KeyBindingView},function(i){f=i.getComboName},function(i){h=i.aa},function(i){b=i.BaseView}],execute:function(){var d,p,y,w,B,v,V,m,C;o._RF.push({},"200246kHsNM7bx45gYyFlVL","KeyConfigView",void 0);var _=l.ccclass,K=l.property,N=h.ctrl;i("KeyConfigView",(d=_("KeyConfigView"),p=K(c),y=K(a),w=K(c),d((V=n((v=function(i){function n(){for(var n,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return n=i.call.apply(i,[this].concat(o))||this,t(n,"bg",V,r(n)),t(n,"bindingView",m,r(n)),t(n,"layout",C,r(n)),n.currentBinding=null,n._bindingViews=[],n.actionConfig=null,n}e(n,i);var o=n.prototype;return o.init=function(i){this.actionConfig=i},o.onEnable=function(){h.global.isPause=!0,s.on("KeyBindingSelect",this.onSelect,this);var i=h.ctrl.getKeys(),n=this._bindingViews.length;if(n<i.length)for(var e=n;e<i.length;e++){var t=u(this.bindingView);t.parent=this.layout;var r=t.getComponent(g);this._bindingViews.push(r)}this._bindingViews.forEach((function(n,e){var t=i[e];n.bindingName=t;var r=N.get(t);if(r){var o=f(r.combo);n.keyName=o}})),this.bg&&this.bg.on(c.EventType.TOUCH_END,this.clearSelect,this)},o.onDisable=function(){this.currentBinding&&(this.currentBinding.color=!1),N.clearBinding(),this.bg&&this.bg.off(c.EventType.TOUCH_END,this.clearSelect,this),h.global.isPause=!1},o.clearSelect=function(){this.currentBinding&&(this.currentBinding.color=!1,this.currentBinding=null),N.clearBinding()},o.onSelect=function(i){this.currentBinding&&(this.currentBinding.color=!1),N.updateBinding(i.nameLabel.string,i.keyLabel),this.currentBinding=i,i.color=!0},o.close=function(){i.prototype.close.call(this)},n}(b)).prototype,"bg",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(v.prototype,"bindingView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(v.prototype,"layout",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=v))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./FrameCore.ts"],(function(i){var t,l,r,e,o,n,a,s,c,u,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,l=i.inheritsLoose,r=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){o=i.cclegacy,n=i._decorator,a=i.Color,s=i.Sprite,c=i.Component},function(i){u=i.Main},function(i){f=i.aa}],execute:function(){var p,d,h,b,g,y,L;o._RF.push({},"91714+LEbNFq5BWdU9PslLO","LoadCtrl",void 0);var v=n.ccclass,C=n.property,m=150,w=new a(m,m,m);i("LoadCtrl",(p=v("LoadCtrl"),d=C(s),h=C(s),p((y=t((g=function(i){function t(){for(var t,l=arguments.length,o=new Array(l),n=0;n<l;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o))||this,r(t,"load",y,e(t)),r(t,"bg",L,e(t)),t.isload=!0,t.fill=0,t}l(t,i);var o=t.prototype;return o.start=function(){this.bg.color=w},o.closeLoad=function(){this.isload=!1,u.ins.initGame(),f.utils.clearUI(this.node)},o.update=function(i){if(this.isload){var t=f.res.loadingRate;this.fill+=.01,this.fill>t&&(this.fill=t),w.r=w.g=w.b=m+105*this.fill,this.bg.color=w,this.load.fillRange=this.fill,this.fill>=.99&&this.closeLoad()}},t}(c)).prototype,"load",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"bg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./LoadCtrl.ts","./Main.ts","./TimeScale.ts","./CoinMgr.ts","./ActionConfig.ts","./CameraCtrl.ts","./PlayerCtrl.ts","./CommonUtils.ts","./Enums.ts","./FrameCore.ts","./Globals.ts","./InputCtrl.ts","./JoystickCtrl.ts","./ResMgr.ts","./SoundMgr.ts","./BaseView.ts","./CoinBarView.ts","./CoinView.ts","./KeyBindingView.ts","./KeyConfigView.ts","./ToastView.ts","./debug-view-runtime-control.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameCore.ts","./Enums.ts","./env","./CameraCtrl.ts","./CoinMgr.ts"],(function(e){var t,r,n,a,i,o,s,c,l,u,p,f,m,d,g,y,h,v,D,b,w,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Camera,u=e.director,p=e.Canvas,f=e.instantiate,m=e.Node,d=e.sys,g=e.Component},function(e){y=e.aa},function(e){h=e.ui,v=e.events,D=e.AssetType},function(e){b=e.DEBUG},function(e){w=e.default},function(e){C=e.CoinMgr}],execute:function(){var M,R,x,I,L,U,_,k;s._RF.push({},"d79d4hW4D5Ot4Q6EMeg3RVw","Main",void 0);var G=c.ccclass,T=c.property;e("Main",(M=G("Main"),R=T(l),x=T(l),M(((k=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"camera3D",U,a(t)),n(t,"camera2D",_,a(t)),t._game=null,t}r(t,e);var s=t.prototype;return s.onLoad=function(){t.ins=this},s.start=function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadRes();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.initGame=function(){this.createLayers(),y.res.getUI(h.ToastView),y.res.getUI(h.ActionView),this.startGame()},s.createLayers=function(){for(var e=u.getScene().getComponentInChildren(p).node,t=y.global.layer2D,r=0;r<=7;r++){var n=t[0]?f(t[0]):y.utils.createUI();n.name="layer2D"+r,n.parent=e,t[r]=n}var a=y.global.layer3D;for(r=0;r<=4;r++){var i=new m;i.name="layer3D"+r,i.parent=this.node.parent,a[r]=i}var o=y.global.cameras;o[0]=this.camera3D,o[1]=this.camera2D},s.startGame=function(){(d.isMobile||b)&&y.res.getUI(h.JoystickView),y.res.getNode("Land",y.layer3D[0]);var e=this.camera3D.getComponent(w);e.target=y.global.player=y.res.getNode("Player",y.layer3D[1]),e.init(),u.emit(v.Toast,"UI and Logic by iwae, a lovely chick, with a lot love ^ ^",5),y.sound.startBgm("bgm"),this._game=this.node.addComponent(C)},s.loadRes=function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.res.loadBundle(1,.1);case 2:return e.next=4,y.res.loadRes(1,D.Prefab,.8);case 4:return e.next=6,y.res.loadRes(1,D.Sound,.1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(g)).ins=null,U=t((L=k).prototype,"camera3D",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(L.prototype,"camera2D",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=L))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameCore.ts","./CameraCtrl.ts","./Enums.ts","./CommonUtils.ts"],(function(e){var t,i,a,n,l,r,s,o,c,u,h,p,d,f,m,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,s=e.Vec3,o=e.Quat,c=e.SkeletalAnimation,u=e.Node,h=e.director,p=e.lerp,d=e.Component},function(e){f=e.aa},function(e){m=e.default},function(e){y=e.events},function(e){b=e.quatFromAngleY}],execute:function(){var v,g,_,P,w,z,C,O,E,M;l._RF.push({},"a9929xML5pIl66a7tInyzrW","PlayerCtrl",void 0);var R=r.ccclass,H=r.property,V=f.ctrl,x={h:0,v:0},A=new s,F=new o,k=180/Math.PI;e("PlayerCtrl",(v=R("PlayerControler"),g=H(c),_=H(u),P=H(u),v((C=t((z=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,a(t,"anm",C,n(t)),a(t,"speed",O,n(t)),a(t,"ball",E,n(t)),a(t,"mic",M,n(t)),t.camera=void 0,t._current="",t._speedV=0,t._speedH=0,t}i(t,e);var l=t.prototype;return l.onEnable=function(){this.ball.scale=s.ZERO,this.mic.scale=s.ZERO,this.camera=f.cameras[0].getComponent(m),h.on(y.playerAnm,this.play,this)},l.onDisable=function(){h.off(y.playerAnm,this.play,this)},l.play=function(e,t){var i=this;void 0===t&&(t=.3),e==this._current||f.ctrl.isPlaying||("basketball"==e&&(this.ball.scale=s.ONE,this.scheduleOnce((function(){i.ball.scale=s.ZERO}),3)),"rap"==e&&(this.mic.scale=s.ONE,this.scheduleOnce((function(){i.mic.scale=s.ZERO}),4)),this._current=e,this.anm.crossFade(e,t))},l.wave=function(e){f.global.isPause=!0,this.play("wave",.1),this.scheduleOnce((function(){f.global.isPause=!1}),e)},l.update=function(e){if(!f.global.isPause){s.copy(A,this.node.position),x.h=A.x,x.v=A.z;var t=V.v,i=V.h,a=!1;if(f.global.isMove=!1,0!=t||0!=i){var n=4*e*V.mag,l=-Math.atan2(t,i)*k+this.camera._targetRotation.y,r=l/k;this._speedH=p(this._speedH,n*Math.sin(r),5*e),this._speedV=p(this._speedV,n*Math.cos(r),5*e),b(F,l),f.global.isMove=a=!0,o.rotateTowards(F,this.node.rotation,F,360*e*1.8),x.h+=this._speedH,x.v+=this._speedV,A.x=x.h,A.z=x.v,this.node.rotation=F,this.play("walk")}else this._speedH=this._speedV=0,this.play("idle");a&&!f.ctrl.isPlaying&&(A.x=x.h,A.z=x.v,this.node.position=A)}},t}(d)).prototype,"anm",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(z.prototype,"speed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=t(z.prototype,"ball",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"mic",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/ResMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Globals.ts"],(function(e){var t,n,r,a,i,s,o,u,l,c;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.instantiate,i=e.NodePool,s=e.assetManager,o=e.Texture2D,u=e.ImageAsset},function(e){l=e.AssetType},function(e){c=e.default}],execute:function(){r._RF.push({},"9d193Ozp4FDF4owOBNeNc72","ResMgr",void 0);e("default",new(function(){function e(){this._jsonAssetMap={},this._clipMap={},this._uiMap={},this._abBundleMap={},this._atlasMap={},this._textureCubeMap={},this._spriteMap={},this._textureMap={},this._loadStemp=null,this.loadTime=0,this._totalTime=0,this._dictPool={},this._dictPrefab={},this.loadingRate=0,this._debug=!1}var r=e.prototype;return r.getNode=function(e,t,n){var r,s;if("string"==typeof e){if(s=e,!(r=this._dictPrefab[e]))return console.log("Pool invalid prefab name = ",s),null}else r=e,s=e.data.name;var o=null;if(this._dictPool.hasOwnProperty(s)){var u=this._dictPool[s];o=u.size()>0?u.get():a(r)}else{var l=new i;this._dictPool[s]=l,o=a(r)}return t&&(o.parent=t,o.active=!0,n&&(o.position=n)),o},r.putNode=function(e,t){if(e){var n=e.name,r=null;this._dictPool.hasOwnProperty(n)?r=this._dictPool[n]:(r=new i,this._dictPool[n]=r),r.put(e)}},r.clearPool=function(e){this._dictPool.hasOwnProperty(e)&&this._dictPool[e].clear()},r.setPrefab=function(e,t){this._dictPrefab[e]||(this._dictPrefab[e]=t)},r.clearDict=function(){this._dictPrefab={}},r.printTimer=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(e+"load time===",this.loadTime,"ms"),t&&console.log("Load finish, total time===",this._totalTime,"ms")},r.loadBundle=function(){var e=t(n().mark((function e(t,r){var a,i=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadStemp||(this._loadStemp=Date.now()),a="Bundle"+t,e.abrupt("return",new Promise((function(e,n){i._abBundleMap[t]&&e&&e(),s.loadBundle(a,(function(n,a){if(n){var s="bundle"+t+" load error, error=="+n;console.log(s)}else i._abBundleMap[t]=a,i.printTimer("bundle"+t+"__load success"),i.loadingRate+=r,e&&e()}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.loadRes=function(){var e=t(n().mark((function e(t,r,a){var i,s,o=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=0),i=this.loadingRate,s=this,e.abrupt("return",new Promise((function(e,n){o._abBundleMap[t].loadDir(r.path,r.type,(function(e,t){a>0&&(o.loadingRate=i+a*e/t)}),(function(n,a){if(n){var i="Res Error ==="+n;console.log(i),e&&e()}var u;switch(r){case l.UiPrefab:for(var c=0;c<a.length;c++){var p=(u=a[c]).data.name;o.setPrefab(p,u),console.log("ui prefab name==",p)}break;case l.Prefab:for(var d=0;d<a.length;d++)u=a[d],o.setPrefab(u.data.name,u),o._debug&&console.log("prefab name==",u.data.name);break;case l.Sound:for(var f=0;f<a.length;f++)u=a[f],o._debug&&console.log("clip name==",u.name),s._clipMap[u.name]||(s._clipMap[u.name]=u);break;case l.Sprite:for(var h=0;h<a.length;h++)u=a[h],console.log("sprite name==",u.name),o._spriteMap[u.name]||(o._spriteMap[u.name]=u);break;case l.Json:for(var _=0;_<a.length;_++)u=a[_],o._debug&&console.log("json name==",u.name),s._jsonAssetMap[u.name]||(s._jsonAssetMap[u.name]=u.json);break;case l.Atlas:for(var m=0;m<a.length;m++)u=a[m],o._debug&&console.log("atlas name==",u.name),s._atlasMap[u.name]||(s._atlasMap[u.name]=u)}s.printTimer("Bundle"+t+"__"+r.path+"loaded success"),e&&e()}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.loadBgm=function(){var e=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.abrupt("return",new Promise((function(e,n){r._abBundleMap[5].load("bgm",(function(n,r){n&&(console.log("Error info===",n),e&&e()),t._clipMap[r.name]||(t._clipMap[r.name]=r),e&&e()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.loadPrefab=function(){var e=t(n().mark((function e(t){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingRate,e.abrupt("return",new Promise((function(e,n){r._abBundleMap[t.bundle].load(t.path+t.name,(function(n,r){n&&(console.log("wrong prefab info ===",n),e&&e()),this.setPrefab(t.name,r),e&&e()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.preloadRes=function(){var e=t(n().mark((function e(t,r,i){var s,o=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=0),s=this.loadingRate,e.abrupt("return",new Promise((function(e,n){for(var u=o._dictPrefab[t],l=0;l<r;l++)o.putNode(a(u));i>0&&(o.loadingRate=s+i),o.printTimer("preload_"+t),e&&e()})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.getSprites=function(e){return this._spriteMap[e]||null},r.getAtlas=function(e){return this._atlasMap[e]},r.getUI=function(){var e=t(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.clear){e.next=5;break}if(r||!c.layer2D[t.layer].children[0]){e.next=5;break}if(c.layer2D[t.layer].children[0].name!=t.name){e.next=4;break}return e.abrupt("return");case 4:this.putNode(c.layer2D[t.layer].children[0]);case 5:return a=r||c.layer2D[t.layer],e.next=8,this.getPrefab(t,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.putUI=function(e){var t=c.layer2D[e.layer].getChildByName(e.name);t&&this.putNode(t)},r.getPrefab=function(){var e=t(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictPrefab[t.name]){e.next=2;break}return e.abrupt("return",this.getNode(t.name,r));case 2:return e.next=4,this.loadPrefab(t);case 4:return e.abrupt("return",this.getNode(t.name,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.getJson=function(e){return this._jsonAssetMap[e]},r.getClip=function(e){return this._clipMap[e]},r.getTexture=function(e){return this._textureMap[e]},r.getTextureCube=function(e){return this._textureCubeMap[e]},r.createTexture2DWtihImageAsset=function(e,t){void 0===t&&(t=!0);var n,r=null;n="''"!=e._uuid&&null!=e._uuid&&e._uuid.length>0?e._uuid:e.name;var a=this.getTexture2DUUID(n);return s.assets.has(a)?r=s.assets.get(a):(console.log("not exist",a),(r=new o).image=e,r._uuid=a,r._nativeUrl="",s.assets.add(r._uuid,r),s.dependUtil._depends.add(r._uuid,{deps:[e._uuid],nativeDep:[]}),r.setMipFilter(o.Filter.NONE),r.setFilters(o.Filter.LINEAR,o.Filter.LINEAR),r.setWrapMode(o.WrapMode.CLAMP_TO_EDGE,o.WrapMode.CLAMP_TO_EDGE)),t&&r.addRef(),r},r.getNewImageAsset=function(e,t){var n,r=e;return s.assets.has(r)?(console.log("exist imgae",r),n=s.assets.get(r)):(console.log("new imgae",r),(n=t?new u(t):new u)._uuid=r,s.assets.add(n._uuid,n),n._nativeUrl=n._uuid,s.dependUtil._depends.add(n._uuid,{deps:[],nativeDep:[]})),n.addRef(),n},r.getSpriteFrameUUID=function(e){return e+"@f9941"},r.getTexture2DUUID=function(e){return e+"@6c48a"},r.getImageUUID=function(e){return e+"@76234"},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/SoundMgr.ts",["cc","./ResMgr.ts"],(function(o){var i,t,p;return{setters:[function(o){i=o.cclegacy,t=o.AudioSourceComponent},function(o){p=o.default}],execute:function(){i._RF.push({},"bf129C5rEdIyKQStT72J8k4","SoundMgr",void 0);o("default",new(function(){function o(){this._audioComp=new t,this._audioLoopComp=new t,this._effectComp=new t,this._curLoopAudioName=""}var i=o.prototype;return i.startBgm=function(o,i){if(void 0===i&&(i=!0),o||!this._audioComp.clip){if(o){var t=p.getClip(o);this._audioComp.clip=t,this._audioComp.loop=i,this._audioComp.volume=.5,this._audioComp.play()}}else this._audioComp.play()},i.stopBgm=function(){this._audioComp.stop()},i.play=function(o,i){void 0===i&&(i=.6),this._effectComp.playOneShot(p.getClip(o),i)},i.loop=function(o){var i=p.getClip(o);this._audioLoopComp.stop(),this._audioLoopComp.clip=i,this._audioLoopComp.loop=!0,this._audioLoopComp.play(),this._curLoopAudioName=o},i.stoploop=function(){this._audioLoopComp.stop()},o}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/TimeScale.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var c,t,n,i,r;return{setters:[function(e){c=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,i=e.director,r=e.Component}],execute:function(){var o,a;t._RF.push({},"5cad5S7g31GLZJ6V5nmVIVQ","TimeScale",void 0);var s=n.ccclass;e("TimeScale",s("TimeScale")(((a=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t.prototype.start=function(){var e=i.tick;i.tick=function(c){c*=t.scale,e.call(i,c)}},t}(r)).scale=1,o=a))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/ToastView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts"],(function(t){var e,i,o,n,r,s,a,c,l,u,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,c=t.UIOpacity,l=t.Tween,u=t.director,p=t.Component},function(t){h=t.events}],execute:function(){var f,y,w,T,b,m,v;r._RF.push({},"bff51GGa4lI24yTmwB2+eLC","ToastView",void 0);var d=s.ccclass,g=s.property;t("ToastCtrl",(f=d("ToastCtrl"),y=g(a),w=g(c),f((m=e((b=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"text",m,n(e)),o(e,"toast",v,n(e)),e._tw=new l,e.time=1,e}i(e,t);var r=e.prototype;return r.onEnable=function(){u.on(h.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},r.onDisable=function(){u.off(h.Toast,this.showToast,this)},r.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},e}(p)).prototype,"text",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(b.prototype,"toast",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});